# This is the valet Makefile for Windows and the MinGW compiler.
# It does assume a Unix-like setup for some commands,
# but if you only want to call "make" with the default target,
# you should be OK.

# If your exact compiler name is not given here, change it.
# CC		= mingw32-g++
CC		= i686-w64-mingw32-g++

CC_FLAGS	= -O3 -flto -fopenmp -mtune=generic -std=c++11

# These flags are not turned on be default, but DDS should pass them.
# Turn them on below.
WARN_FLAGS	= 		\
	-Wshadow 		\
	-Wsign-conversion 	\
	-pedantic -Wall -Wextra  \
	-Wcast-align -Wcast-qual \
	-Wctor-dtor-privacy 	\
	-Wdisabled-optimization \
	-Winit-self 		\
	-Wlogical-op 		\
	-Wmissing-declarations 	\
	-Wmissing-include-dirs 	\
	-Wnoexcept 		\
	-Wold-style-cast 	\
	-Woverloaded-virtual 	\
	-Wredundant-decls 	\
	-Wsign-promo 		\
	-Wstrict-null-sentinel 	\
	-Wstrict-overflow=1 	\
	-Wswitch-default -Wundef \
	-Werror 		\
	-Wno-unused 		\
	-Wno-unknown-pragmas 	\
	-Wno-long-long		\
	-Wno-maybe-uninitialized	\
	-Wno-format

# Here you can turn on warnings.
# CC_FULL_FLAGS	= $(CC_FLAGS)
CC_FULL_FLAGS	= $(CC_FLAGS) $(WARN_FLAGS)

DLLBASE         = reader
DLL             = $(DLLBASE).dll
DLIB            = $(DLLBASE).lib

LIB_FLAGS       = -mdll
LIB_USE_FLAGS   = -L. -l$(DLLBASE)

VFILE           = buildres

BUILD_FILES	=		\
	Auction.cpp		\
        Board.cpp               \
	Canvas.cpp		\
	Contract.cpp		\
	Date.cpp		\
	Deal.cpp		\
	Debug.cpp		\
	Files.cpp		\
	Group.cpp		\
        Location.cpp            \
	Play.cpp		\
	Players.cpp		\
        Scoring.cpp             \
        Segment.cpp             \
        Session.cpp             \
	Tableau.cpp		\
        Teams.cpp               \
	UnitTest.cpp		\
	Valuation.cpp		\
	args.cpp		\
	fileEML.cpp		\
	filePBN.cpp		\
	fileRBN.cpp		\
	fileRBX.cpp		\
	fileTXT.cpp		\
	fileLIN.cpp		\
	fileREC.cpp		\
	parse.cpp		\
	reader.cpp


LD_FLAGS        =               \
        -Wl,--subsystem,windows \
        -Wl,--output-def,$(DLLBASE).def \
        -Wl,--dynamicbase       \
        -Wl,--nxcompat          \
        -Wl,--no-seh            \
        -Wl,--enable-stdcall-fixup

VOBJ_FILES 	= $(subst .cpp,.o,$(BUILD_FILES)) 
LOBJ_FILES 	= $(subst .cpp,.o,$(LIB_FILES)) $(VFILE).o
DOBJ_FILES 	= $(subst .cpp,.o,$(DRIVER_FILES)) 


reader:	$(VOBJ_FILES)
	$(CC) $(CC_FULL_FLAGS) $(VOBJ_FILES) -o reader.exe

%.o:	%.cpp
	$(CC) $(CC_FULL_FLAGS) -c $<

depend:
	makedepend -Y -o.obj -- $(CC_FLAGS) -- $(BUILD_FILES) $(LIB_FILES) $(DRIVER_FILES)

clean:
	rm -f $(OBJ_FILES) $(LOBJ_FILES) $(DOBJ_FILES) reader.exe 

# DO NOT DELETE

Auction.obj: Auction.h bconst.h Contract.h Debug.h parse.h portab.h
Board.obj: bconst.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
Board.obj: Play.h Debug.h Valuation.h portab.h parse.h
Canvas.obj: Canvas.h
Contract.obj: Contract.h bconst.h Debug.h parse.h portab.h
Date.obj: Date.h bconst.h portab.h parse.h Debug.h
Deal.obj: Deal.h bconst.h Debug.h parse.h
Debug.obj: Debug.h
Files.obj: Files.h bconst.h Debug.h portab.h
Group.obj: Group.h Segment.h Date.h bconst.h Location.h Session.h Scoring.h
Group.obj: Teams.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
Group.obj: Play.h portab.h parse.h Debug.h
Location.obj: Location.h bconst.h portab.h Debug.h
Play.obj: Play.h bconst.h Contract.h Debug.h parse.h portab.h
Players.obj: Players.h bconst.h portab.h parse.h Debug.h
Scoring.obj: Scoring.h bconst.h portab.h Debug.h
Segment.obj: Segment.h Date.h bconst.h Location.h Session.h Scoring.h Teams.h
Segment.obj: Board.h Deal.h Tableau.h Players.h Auction.h Contract.h Play.h
Segment.obj: portab.h parse.h Debug.h
Session.obj: Session.h bconst.h Debug.h portab.h parse.h
Tableau.obj: Tableau.h bconst.h Contract.h Debug.h parse.h
Teams.obj: Teams.h bconst.h portab.h parse.h Debug.h
UnitTest.obj: portab.h bconst.h UnitTest.h Tableau.h Contract.h Deal.h
UnitTest.obj: Auction.h Play.h Date.h Location.h Scoring.h Teams.h Session.h
UnitTest.obj: Segment.h Board.h Players.h Debug.h
Valuation.obj: Valuation.h
args.obj: bconst.h args.h
fileEML.obj: Board.h Deal.h bconst.h Tableau.h Players.h Auction.h Contract.h
fileEML.obj: Play.h Canvas.h Debug.h Group.h Segment.h Date.h Location.h
fileEML.obj: Session.h Scoring.h Teams.h fileEML.h parse.h portab.h
filePBN.obj: Group.h Segment.h Date.h bconst.h Location.h Session.h Scoring.h
filePBN.obj: Teams.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
filePBN.obj: Play.h Debug.h filePBN.h parse.h portab.h
fileRBN.obj: Group.h Segment.h Date.h bconst.h Location.h Session.h Scoring.h
fileRBN.obj: Teams.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
fileRBN.obj: Play.h Debug.h fileRBN.h parse.h portab.h
fileRBX.obj: Group.h Segment.h Date.h bconst.h Location.h Session.h Scoring.h
fileRBX.obj: Teams.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
fileRBX.obj: Play.h Debug.h fileRBX.h parse.h portab.h
fileTXT.obj: Canvas.h Group.h Segment.h Date.h bconst.h Location.h Session.h
fileTXT.obj: Scoring.h Teams.h Board.h Deal.h Tableau.h Players.h Auction.h
fileTXT.obj: Contract.h Play.h Debug.h fileTXT.h parse.h portab.h
fileLIN.obj: Board.h Deal.h bconst.h Tableau.h Players.h Auction.h Contract.h
fileLIN.obj: Play.h Group.h Segment.h Date.h Location.h Session.h Scoring.h
fileLIN.obj: Teams.h Debug.h fileLIN.h parse.h portab.h
fileREC.obj: Board.h Deal.h bconst.h Tableau.h Players.h Auction.h Contract.h
fileREC.obj: Play.h Canvas.h Group.h Segment.h Date.h Location.h Session.h
fileREC.obj: Scoring.h Teams.h Debug.h fileREC.h parse.h portab.h
parse.obj: Debug.h parse.h bconst.h portab.h
reader.obj: Group.h Segment.h Date.h bconst.h Location.h Session.h Scoring.h
reader.obj: Teams.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
reader.obj: Play.h UnitTest.h args.h fileRBN.h fileRBX.h filePBN.h fileEML.h
reader.obj: fileTXT.h fileLIN.h fileREC.h portab.h Debug.h
