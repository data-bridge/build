# This is the Valet Makefile for Cygwin under Windows and the 
# GNU g++ compiler.  It does assume a Unix-like setup for some 
# commands, but if you only want to call "make" with the default 
# target, you should be OK.

# If your compiler name is not given here, change it.
CC		= g++

CC_FLAGS	= -O3 -flto -mtune=generic -fno-use-linker-plugin \
		-std=c++11 -ffunction-sections -fdata-sections

LD_FLAGS        =               \
        -Wl,--subsystem,windows \
        -Wl,--output-def,$(DLLBASE).def \
        -Wl,--dynamicbase       \
        -Wl,--nxcompat          \
        -Wl,--no-seh            \
        -Wl,--enable-stdcall-fixup \
	-Wl,--gc-sections,--print-gc-sections

# These flags are not turned on be default, but Valet should pass them.
# Turn them on below.
WARN_FLAGS	= 		\
	-Wshadow 		\
	-Wsign-conversion 	\
	-pedantic -Wall -Wextra  \
	-Wcast-align -Wcast-qual \
	-Wctor-dtor-privacy 	\
	-Wdisabled-optimization \
	-Wformat=2 		\
	-Winit-self 		\
	-Wlogical-op 		\
	-Wmissing-declarations 	\
	-Wmissing-include-dirs 	\
	-Wnoexcept 		\
	-Wold-style-cast 	\
	-Woverloaded-virtual 	\
	-Wredundant-decls 	\
	-Wsign-promo 		\
	-Wstrict-null-sentinel 	\
	-Wstrict-overflow=1 	\
	-Wswitch-default -Wundef \
	-Werror 		\
	-Wno-unused 		\
	-Wno-unknown-pragmas 	\
	-Wno-long-long

# Here you can turn on warnings.
# CC_FULL_FLAGS	= $(CC_FLAGS)
CC_FULL_FLAGS	= $(CC_FLAGS) $(WARN_FLAGS)

BUILD_FILES	=		\
	Auction.cpp		\
        Board.cpp               \
	Canvas.cpp		\
	Contract.cpp		\
	Date.cpp		\
	Deal.cpp		\
	Debug.cpp		\
	Files.cpp		\
	Group.cpp		\
        Location.cpp            \
	Play.cpp		\
	Players.cpp		\
        Scoring.cpp             \
        Segment.cpp             \
        Session.cpp             \
	Tableau.cpp		\
        Teams.cpp               \
	UnitTest.cpp		\
	Valuation.cpp		\
	args.cpp		\
	fileEML.cpp		\
	filePBN.cpp		\
	fileRBN.cpp		\
	fileRBX.cpp		\
	fileTXT.cpp		\
	fileLIN.cpp		\
	fileREC.cpp		\
	parse.cpp		\
	reader.cpp

VOBJ_FILES 	= $(subst .cpp,.o,$(BUILD_FILES)) 

valet:	$(VOBJ_FILES)
	$(CC) $(CC_FULL_FLAGS) $(VOBJ_FILES) $(LD_FLAGS) -o reader

%.o:	%.cpp
	$(CC) $(CC_FULL_FLAGS) -c $<

depend:
	makedepend -Y -- $(CC_FLAGS) -- $(BUILD_FILES)

clean:
	rm -f $(VOBJ_FILES) $(LOBJ_FILES) $(DOBJ_VILES) reader.exe


# DO NOT DELETE

Auction.o: Auction.h bconst.h Contract.h Debug.h parse.h portab.h
Board.o: bconst.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
Board.o: Play.h Debug.h Valuation.h portab.h parse.h
Canvas.o: Canvas.h
Contract.o: Contract.h bconst.h Debug.h parse.h portab.h
Date.o: Date.h bconst.h portab.h parse.h Debug.h
Deal.o: Deal.h bconst.h Debug.h parse.h
Debug.o: Debug.h
Files.o: Files.h bconst.h Debug.h portab.h
Group.o: Group.h Segment.h Date.h bconst.h Location.h Session.h Scoring.h
Group.o: Teams.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
Group.o: Play.h portab.h parse.h Debug.h
Location.o: Location.h bconst.h portab.h Debug.h
Play.o: Play.h bconst.h Contract.h Debug.h parse.h portab.h
Players.o: Players.h bconst.h portab.h parse.h Debug.h
Scoring.o: Scoring.h bconst.h portab.h Debug.h
Segment.o: Segment.h Date.h bconst.h Location.h Session.h Scoring.h Teams.h
Segment.o: Board.h Deal.h Tableau.h Players.h Auction.h Contract.h Play.h
Segment.o: portab.h parse.h Debug.h
Session.o: Session.h bconst.h Debug.h portab.h parse.h
Tableau.o: Tableau.h bconst.h Contract.h Debug.h parse.h
Teams.o: Teams.h bconst.h portab.h parse.h Debug.h
UnitTest.o: portab.h bconst.h UnitTest.h Tableau.h Contract.h Deal.h
UnitTest.o: Auction.h Play.h Date.h Location.h Scoring.h Teams.h Session.h
UnitTest.o: Segment.h Board.h Players.h Debug.h
Valuation.o: Valuation.h
args.o: bconst.h args.h
fileEML.o: Board.h Deal.h bconst.h Tableau.h Players.h Auction.h Contract.h
fileEML.o: Play.h Canvas.h Debug.h Group.h Segment.h Date.h Location.h
fileEML.o: Session.h Scoring.h Teams.h fileEML.h parse.h portab.h
filePBN.o: Group.h Segment.h Date.h bconst.h Location.h Session.h Scoring.h
filePBN.o: Teams.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
filePBN.o: Play.h Debug.h filePBN.h parse.h portab.h
fileRBN.o: Group.h Segment.h Date.h bconst.h Location.h Session.h Scoring.h
fileRBN.o: Teams.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
fileRBN.o: Play.h Debug.h fileRBN.h parse.h portab.h
fileRBX.o: Group.h Segment.h Date.h bconst.h Location.h Session.h Scoring.h
fileRBX.o: Teams.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
fileRBX.o: Play.h Debug.h fileRBX.h parse.h portab.h
fileTXT.o: Canvas.h Group.h Segment.h Date.h bconst.h Location.h Session.h
fileTXT.o: Scoring.h Teams.h Board.h Deal.h Tableau.h Players.h Auction.h
fileTXT.o: Contract.h Play.h Debug.h fileTXT.h parse.h portab.h
fileLIN.o: Board.h Deal.h bconst.h Tableau.h Players.h Auction.h Contract.h
fileLIN.o: Play.h Group.h Segment.h Date.h Location.h Session.h Scoring.h
fileLIN.o: Teams.h Debug.h fileLIN.h parse.h portab.h
fileREC.o: Board.h Deal.h bconst.h Tableau.h Players.h Auction.h Contract.h
fileREC.o: Play.h Canvas.h Group.h Segment.h Date.h Location.h Session.h
fileREC.o: Scoring.h Teams.h Debug.h fileREC.h parse.h portab.h
parse.o: Debug.h parse.h bconst.h portab.h
reader.o: Group.h Segment.h Date.h bconst.h Location.h Session.h Scoring.h
reader.o: Teams.h Board.h Deal.h Tableau.h Players.h Auction.h Contract.h
reader.o: Play.h UnitTest.h args.h fileRBN.h fileRBX.h filePBN.h fileEML.h
reader.o: fileTXT.h fileLIN.h fileREC.h portab.h Debug.h
